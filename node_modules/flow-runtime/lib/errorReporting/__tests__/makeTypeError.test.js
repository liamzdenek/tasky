'use strict';

var _assert = require('assert');

var _makeTypeError = require('../makeTypeError');

var _makeTypeError2 = _interopRequireDefault(_makeTypeError);

var _globalContext = require('../../globalContext');

var _globalContext2 = _interopRequireDefault(_globalContext);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var no = function no(input) {
  return (0, _assert.ok)(!input);
};


describe('makeTypeError', function () {
  it('should accept a valid value', function () {
    var type = _globalContext2.default.string();
    var validation = _globalContext2.default.validate(type, "hello world");
    var report = (0, _makeTypeError2.default)(validation);
    no(report);
  });

  it('should reject an invalid value', function () {
    var type = _globalContext2.default.string();
    var validation = _globalContext2.default.validate(type, false);
    var report = (0, _makeTypeError2.default)(validation);
    var err = report;
    (0, _assert.ok)(err instanceof TypeError);
  });

  describe('Objects', function () {
    var type = _globalContext2.default.object({
      name: _globalContext2.default.string(),
      address: {
        line1: _globalContext2.default.union(_globalContext2.default.string(), _globalContext2.default.number())
      }
    });

    it('should accept a valid value', function () {
      var validation = _globalContext2.default.validate(type, { name: "foo", address: { line1: 'bar' } });
      var report = (0, _makeTypeError2.default)(validation);
      no(report);
    });

    it('should reject an invalid value', function () {
      var validation = _globalContext2.default.validate(type, false);
      var report = (0, _makeTypeError2.default)(validation);
      var err = report;
      (0, _assert.ok)(err instanceof TypeError);
    });

    it('should reject another invalid value', function () {
      var validation = _globalContext2.default.validate(type, { name: false, address: {} });
      var report = (0, _makeTypeError2.default)(validation);
      var err = report;
      (0, _assert.ok)(err instanceof TypeError);
    });
  });
});